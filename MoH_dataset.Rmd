


Load Package
```{r}
library(tidyr)
library(tidyverse)
library(rvest)
library(plyr)
library(dplyr)
library(stringr)
#install.packages("tidytext")
library(tidytext)
```



Load Data
```{r}
MoH <- readRDS("~/Google Drive/OUCRU/Covid-19/MoH_dataset.rds")
```


Separate paragraphs
```{r}
MoH_df <- MoH %>% 
    unnest_tokens(output = "sentences", input = content,
                token = "regex", pattern = "\\n")  
```

Find which paragraph contains which patient id
```{r}
MoH_df %<>% 
  add_column(id = as.vector(NA)) %>% 
  mutate(id = stringr::str_extract_all(sentences,"bn[:digit:]+")) 
```


Delete rows that don't contain patient id
```{r}
id_row <- which(MoH_df$id != "character(0)")
MoH_df <- MoH_df[id_row,]

thong_bao_row <- grep("thông báo", MoH_df$sentences)
```

```{r}
l <- list()
for (i in 1:nrow(content_df)) {
  d <- data.frame(c(content_df[i,"id"]))
  colnames(d) <- "id"
  d$content <- rep(content_df[i, "content"], nrow(d))
  l[[i]] <- d
}

df <- do.call(rbind, l)

```





